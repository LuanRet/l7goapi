<!DOCTYPE html>
<html lang="pt-BR" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GoTify, revolu√ß√£o!</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #1DB954;
            --primary-dark: #1aa34a;
            --terminal-bg: #0a0a0a;
            --terminal-header: #1a1a1a;
            --terminal-border: #333;
            --text-primary: #e0e0e0;
            --text-secondary: #a0a0a0;
            --text-muted: #666;
            --code-bg: #1a1a1a;
            --input-bg: #121212;
            --input-border: #444;
            --success: #10b981;
            --warning: #f59e0b;
            --error: #ef4444;
            --info: #3b82f6;
            --gray-800: #262626;
            --gray-700: #404040;
            --gray-600: #525252;
            --gray-500: #737373;
            --shadow: 0 10px 40px rgba(0,0,0,0.5);
            --radius: 12px;
            --transition: all 0.3s ease;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #111 0%, #1a1a1a 100%);
            color: var(--text-primary);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 2rem;
            position: relative;
            overflow-x: hidden;
            -webkit-tap-highlight-color: transparent;
        }
        
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 80%, rgba(29, 185, 84, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(59, 130, 246, 0.05) 0%, transparent 50%);
            z-index: -1;
        }
        
        .header {
            text-align: center;
            margin-bottom: 3rem;
            width: 100%;
            max-width: 1200px;
        }
        
        .header h1 {
            font-size: 2.8rem;
            font-weight: 800;
            margin-bottom: 0.5rem;
            background: linear-gradient(135deg, var(--primary), #3b82f6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: -0.5px;
        }
        
        .header p {
            color: var(--text-secondary);
            font-size: 1.1rem;
            max-width: 600px;
            margin: 0 auto;
            line-height: 1.6;
        }
        
        .api-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 1.5rem;
            width: 100%;
            max-width: 1200px;
            margin-bottom: 3rem;
        }
        
        .api-card {
            background: var(--terminal-header);
            border: 1px solid var(--terminal-border);
            border-radius: var(--radius);
            padding: 1.8rem;
            transition: var(--transition);
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }
        
        .api-card:hover {
            transform: translateY(-5px);
            border-color: var(--primary);
            box-shadow: var(--shadow);
        }
        
        .api-card.active {
            border-color: var(--primary);
            background: linear-gradient(135deg, var(--terminal-header), rgba(29, 185, 84, 0.05));
        }
        
        .api-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--primary), #3b82f6);
            opacity: 0;
            transition: var(--transition);
        }
        
        .api-card:hover::before,
        .api-card.active::before {
            opacity: 1;
        }
        
        .api-card-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.2rem;
        }
        
        .api-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.4rem;
            background: linear-gradient(135deg, var(--gray-700), var(--gray-800));
            color: var(--primary);
        }
        
        .api-title {
            font-size: 1.4rem;
            font-weight: 600;
            margin: 0;
        }
        
        .api-url {
            font-family: 'JetBrains Mono', monospace;
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-bottom: 1.2rem;
            padding: 0.5rem 0.8rem;
            background: var(--input-bg);
            border-radius: 6px;
            border: 1px solid var(--input-border);
            word-break: break-all;
        }
        
        .api-description {
            color: var(--text-secondary);
            font-size: 0.95rem;
            line-height: 1.6;
            margin-bottom: 1.5rem;
        }
        
        .api-features {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-top: 1rem;
        }
        
        .api-feature {
            background: rgba(29, 185, 84, 0.1);
            color: var(--primary);
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
            border: 1px solid rgba(29, 185, 84, 0.2);
        }
        
        .terminal-container {
            width: 100%;
            max-width: 1200px;
            background: var(--terminal-bg);
            border-radius: var(--radius);
            border: 1px solid var(--terminal-border);
            overflow: hidden;
            box-shadow: var(--shadow);
            margin-bottom: 3rem;
        }
        
        .terminal-header {
            background: var(--terminal-header);
            padding: 1rem 1.5rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 1px solid var(--terminal-border);
        }
        
        .terminal-title {
            display: flex;
            align-items: center;
            gap: 0.8rem;
            font-weight: 600;
        }
        
        .terminal-title i {
            color: var(--primary);
        }
        
        .terminal-controls {
            display: flex;
            gap: 0.5rem;
        }
        
        .control-btn {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .control-btn.close { background: #ff5f57; }
        .control-btn.minimize { background: #ffbd2e; }
        .control-btn.maximize { background: #28ca42; }
        
        .control-btn:hover {
            transform: scale(1.2);
        }
        
        .terminal-body {
            padding: 1.5rem;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.95rem;
            line-height: 1.5;
            max-height: 500px;
            overflow-y: auto;
        }
        
        .terminal-prompt {
            color: var(--primary);
            font-weight: 600;
        }
        
        .terminal-input {
            background: transparent;
            border: none;
            color: var(--text-primary);
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.95rem;
            width: calc(100% - 120px);
            outline: none;
            padding: 0.3rem;
            margin-left: 0.5rem;
        }
        
        .terminal-input::placeholder {
            color: var(--text-muted);
        }
        
        .terminal-output {
            margin-top: 1rem;
        }
        
        .response {
            background: var(--code-bg);
            border-radius: 8px;
            padding: 1.2rem;
            margin-top: 1rem;
            border: 1px solid var(--terminal-border);
            position: relative;
            overflow: hidden;
        }
        
        .response::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 4px;
            background: var(--primary);
        }
        
        .response.success::before { background: var(--success); }
        .response.error::before { background: var(--error); }
        .response.warning::before { background: var(--warning); }
        
        .response-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            padding-bottom: 0.8rem;
            border-bottom: 1px solid var(--terminal-border);
        }
        
        .response-status {
            padding: 0.3rem 1rem;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
        }
        
        .status-success { background: rgba(16, 185, 129, 0.1); color: var(--success); }
        .status-error { background: rgba(239, 68, 68, 0.1); color: var(--error); }
        .status-warning { background: rgba(245, 158, 11, 0.1); color: var(--warning); }
        
        .response-time {
            color: var(--text-muted);
            font-size: 0.85rem;
        }
        
        .response-body {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            white-space: pre-wrap;
            word-wrap: break-word;
            line-height: 1.5;
            color: var(--text-secondary);
            max-height: 200px;
            overflow-y: auto;
        }

        .media-player {
            background: var(--terminal-header);
            border-radius: var(--radius);
            border: 1px solid var(--terminal-border);
            padding: 1.5rem;
            margin-top: 2rem;
            display: none;
        }
        
        .media-player.active {
            display: block;
        }
        
        .player-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.2rem;
        }
        
        .player-album-art {
            width: 80px;
            height: 80px;
            border-radius: 12px;
            background: linear-gradient(135deg, var(--gray-700), var(--gray-800));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            color: var(--primary);
            overflow: hidden;
            position: relative;
        }
        
        .player-album-art img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: none;
        }
        
        .player-album-art .music-icon {
            position: absolute;
            font-size: 2rem;
        }
        
        .player-info h4 {
            font-size: 1.2rem;
            margin-bottom: 0.3rem;
            color: var(--text-primary);
        }
        
        .player-info p {
            color: var(--text-secondary);
            font-size: 0.95rem;
        }
        
        .player-controls {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-top: 1.2rem;
        }
        
        .player-btn {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            background: var(--input-bg);
            border: 1px solid var(--input-border);
            color: var(--text-primary);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .player-btn:hover {
            background: var(--primary);
            color: white;
            transform: scale(1.05);
        }
        
        .player-btn.play {
            width: 54px;
            height: 54px;
            background: var(--primary);
            color: white;
        }
        
        .player-progress {
            flex-grow: 1;
            height: 4px;
            background: var(--gray-700);
            border-radius: 2px;
            position: relative;
            cursor: pointer;
            overflow: hidden;
        }
        
        .player-progress-bar {
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 0%;
            background: var(--primary);
            border-radius: 2px;
            transition: width 0.1s linear;
        }
        
        .player-time {
            display: flex;
            justify-content: space-between;
            margin-top: 0.5rem;
            color: var(--text-muted);
            font-size: 0.85rem;
        }

        .youtube-video {
            background: var(--terminal-header);
            border-radius: var(--radius);
            border: 1px solid var(--terminal-border);
            padding: 2rem;
            margin-top: 2rem;
            display: none;
        }
        
        .youtube-video.active {
            display: block;
        }
        
        .video-container {
            position: relative;
            padding-bottom: 70%;
            height: 0;
            margin-top: 1rem;
            border-radius: 8px;
            overflow: hidden;
            background: #000;
        }
        
        .video-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
            object-fit: contain;
        }

        .loader {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid var(--gray-700);
            border-top: 3px solid var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .test-commands {
            display: flex;
            flex-wrap: wrap;
            gap: 0.8rem;
            margin-top: 1rem;
        }
        
        .test-command {
            background: var(--input-bg);
            border: 1px solid var(--input-border);
            color: var(--text-secondary);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.85rem;
            cursor: pointer;
            transition: var(--transition);
            font-family: 'JetBrains Mono', monospace;
        }
        
        .test-command:hover {
            background: rgba(29, 185, 84, 0.1);
            color: var(--primary);
            border-color: var(--primary);
        }

        .footer {
            text-align: center;
            color: var(--text-muted);
            font-size: 0.9rem;
            margin-top: 2rem;
            padding-top: 2rem;
            border-top: 1px solid var(--terminal-border);
            width: 100%;
            max-width: 1200px;
        }
        
        .status-indicator {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 500;
        }
        
        .status-online {
            background: rgba(16, 185, 129, 0.1);
            color: var(--success);
        }
        
        .status-offline {
            background: rgba(239, 68, 68, 0.1);
            color: var(--error);
        }
        
        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
        }
        
        .status-dot.online { background: var(--success); }
        .status-dot.offline { background: var(--error); }
        
        @media (max-width: 768px) {
            body {
                padding: 1rem;
            }
            
            .header h1 {
                font-size: 2.2rem;
            }
            
            .api-cards {
                grid-template-columns: 1fr;
            }
            
            .terminal-body {
                max-height: 400px;
            }
        }
       
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: var(--terminal-header);
        }
        
        ::-webkit-scrollbar-thumb {
            background: var(--gray-600);
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: var(--gray-500);
        }
    </style>
</head>
<body>
    <!-- Header -->
    <div class="header">
        <h1>Go Terminal</h1>
        <p>Teste minhas Apis em tempo real!</p>
    </div>

    <!-- API Cards -->
    <div class="api-cards">
        <div class="api-card active" data-api="spotify-go">
            <div class="api-card-header">
                <div class="api-icon">
                    <i class="fab fa-golang"></i>
                </div>
                <h3 class="api-title">Spotify API (GO)</h3>
            </div>
            <div class="api-url">POST https://go.luangg.cloud/spotify/</div>
            <p class="api-description">API em GO para downloads de m√∫sicas do Spotify.</p>
            <div class="api-features">
                <span class="api-feature">Download de tracks</span>
                <span class="api-feature">Formato MP3/FLAC</span>
                <span class="api-feature">320kbts de qualidade</span>
            </div>
            <div class="status-indicator status-online" id="spotifyStatus">
                <div class="status-dot online"></div>
                <span>Online</span>
            </div>
        </div>
        
        <div class="api-card" data-api="youtube-py">
            <div class="api-card-header">
                <div class="api-icon">
                    <i class="fab fa-python"></i>
                </div>
                <h3 class="api-title">YouTube API (Python)</h3>
            </div>
            <div class="api-url">GET https://yt.luangg.cloud/video/{id}?quality=1080p</div>
            <p class="api-description">API em Python para download de v√≠deos do YouTube.</p>
            <div class="api-features">
                <span class="api-feature">Stream 1080p/4K</span>
                <span class="api-feature">√Åudio/Video</span>
                <span class="api-feature">Player integrado</span>
            </div>
            <div class="status-indicator status-online" id="youtubeStatus">
                <div class="status-dot online"></div>
                <span>Online</span>
            </div>
        </div>
    </div>

    <!-- Terminal -->
    <div class="terminal-container">
        <div class="terminal-header">
            <div class="terminal-title">
                <i class="fas fa-terminal"></i>
                <span>Terminal</span>
            </div>
            <div class="terminal-controls">
                <div class="control-btn close"></div>
                <div class="control-btn minimize"></div>
                <div class="control-btn maximize"></div>
            </div>
        </div>
        
        <div class="terminal-body">
            <div id="terminalOutput">
                <div class="terminal-prompt">$</div> 
                <span class="terminal-text">Digite: spotify [url] ou youtube [id]</span>
                <br><br>
            </div>
            
            <div class="terminal-input-line">
                <span class="terminal-prompt">$</span>
                <input type="text" class="terminal-input" id="terminalInput" placeholder="spotify https://..." autocomplete="off">
            </div>
            
            <!-- Test Commands -->
            <div class="test-commands">
                <div class="test-command" onclick="setCommand('spotify https://open.spotify.com/track/0mphI8cAYLcb2pztvA3bg2?si=3qGOsNgGRGqg80jFJeJwzQ')">
                    Spotify: Mo brisa ‚Äî MC Hariel
                </div>
                <div class="test-command" onclick="setCommand('spotify https://open.spotify.com/track/6iMFNw7YEUTz7G4DuumQa8?si=qfKoBmCdQf2j0DVAczPB9A')">
                    Spotify: Tchau ‚Äî MC Hariel
                </div>
                <div class="test-command" onclick="setCommand('youtube aq-DH4iwviE')">
                    YouTube: 333 ‚Äî Matu√™
                </div>
                <div class="test-command" onclick="setCommand('youtube d-GgZpCtBXw')">
                    YouTube: 777-666 ‚Äî Matu√™
                </div>
            </div>
        </div>
    </div>

    <!-- Response Area -->
    <div class="terminal-container">
        <div class="terminal-header">
            <div class="terminal-title">
                <i class="fas fa-code"></i>
                <span>Respostas</span>
            </div>
        </div>
        <div class="terminal-body">
            <div id="responseArea">
                <div class="response success">
                    <div class="response-header">
                        <span class="response-status status-success">PRONTO</span>
                        <span class="response-time" id="responseTime">--:--:--</span>
                    </div>
                    <div class="response-body">
API Terminal pronto para uso.
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Media Player Spotify -->
    <div class="media-player" id="mediaPlayer">
        <div class="player-header">
            <div class="player-album-art" id="albumArt">
                <i class="fas fa-music music-icon"></i>
            </div>
            <div class="player-info">
                <h4>√Åudio Spotify</h4>
                <p>mp3 ‚Ä¢ 320kbts</p>
            </div>
        </div>
        
        <audio id="audioPlayer" preload="metadata" style="display: none;"></audio>
        
        <div class="player-controls">
            <div class="player-btn" onclick="playerControl('prev')">
                <i class="fas fa-step-backward"></i>
            </div>
            <div class="player-btn play" onclick="playerControl('play')">
                <i class="fas fa-play" id="playIcon"></i>
            </div>
            <div class="player-btn" onclick="playerControl('next')">
                <i class="fas fa-step-forward"></i>
            </div>
            
            <div class="player-progress" onclick="seekAudio(event)">
                <div class="player-progress-bar" id="progressBar"></div>
            </div>
        </div>
        
        <div class="player-time">
            <span id="currentTime">0:00</span>
            <span id="duration">0:00</span>
        </div>
        
        <div style="margin-top: 1rem; display: flex; gap: 1rem;">
            <button onclick="downloadAudio()" style="background: var(--primary); color: white; border: none; padding: 0.5rem 1rem; border-radius: 6px; cursor: pointer; font-family: 'Inter';">
                <i class="fas fa-download"></i> Baixar MP3
            </button>
        </div>
    </div>

    <!-- YouTube Video Player -->
    <div class="youtube-video" id="youtubePlayer">
        <div class="terminal-title">
            <i class="fab fa-youtube"></i>
            <span>YouTube Player</span>
        </div>
        <div class="video-container" id="videoContainer">
            <!-- Video player ser√° injetado aqui -->
        </div>
        <div style="margin-top: 1rem; display: flex; justify-content: space-between; align-items: center;">
            <div style="color: var(--text-secondary); font-size: 0.9rem;">
                <i class="fas fa-hd"></i> 1080p
            </div>
            <button onclick="openYouTubeVideo()" style="background: transparent; border: 1px solid var(--error); color: var(--error); padding: 0.4rem 1rem; border-radius: 6px; cursor: pointer; font-family: 'Inter';">
                <i class="fab fa-youtube"></i> Abrir no YouTube
            </button>
        </div>
    </div>

    <div class="footer">
        <p>¬© GoTify | L7 Dev</p>
    </div>

    <script>
        const terminalInput = document.getElementById('terminalInput');
        const terminalOutput = document.getElementById('terminalOutput');
        const responseArea = document.getElementById('responseArea');
        const mediaPlayer = document.getElementById('mediaPlayer');
        const youtubePlayer = document.getElementById('youtubePlayer');
        const audioPlayer = document.getElementById('audioPlayer');
        const responseTime = document.getElementById('responseTime');

        let currentAudioUrl = null;
        let currentVideoId = null;

        document.addEventListener('DOMContentLoaded', () => {
            terminalInput.focus();
            
            terminalInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    const command = terminalInput.value.trim();
                    if (command) {
                        processCommand(command);
                        terminalInput.value = '';
                    }
                }
            });

            audioPlayer.addEventListener('timeupdate', updateProgress);
            audioPlayer.addEventListener('loadedmetadata', () => {
                document.getElementById('duration').textContent = formatTime(audioPlayer.duration);
            });

            updateCurrentTime();
            setInterval(updateCurrentTime, 1000);
        });

        function updateCurrentTime() {
            responseTime.textContent = new Date().toLocaleTimeString('pt-BR', {
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit'
            });
        }

        function setCommand(command) {
            terminalInput.value = command;
            terminalInput.focus();
        }

        function processCommand(command) {
            terminalOutput.innerHTML = '';
            
            const parts = command.split(' ');
            const platform = parts[0].toLowerCase();
            const param = parts.slice(1).join(' ');
            
            if (!param) {
                addOutput('‚ùå Especifique URL ou ID');
                return;
            }
            
            mediaPlayer.classList.remove('active');
            youtubePlayer.classList.remove('active');
            
            if (platform === 'spotify') {
                handleSpotify(param);
            } else if (platform === 'youtube') {
                handleYouTube(param);
            } else {
                addOutput('‚ùå Use "spotify [url]" ou "youtube [id]"');
            }
        }

        async function handleSpotify(url) {
            if (!url.includes('spotify.com/track/')) {
                addOutput('‚ùå URL do Spotify inv√°lida');
                return;
            }
            
            const userId = Math.floor(Math.random() * 9000) + 1000;
            
            addOutput(`üéµ Enviando para API Spotify...`);
            
            try {
                const response = await fetch('https://go.luangg.cloud/spotify/', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'x-api-key': 'luanx' 
                    },
                    body: JSON.stringify({
                        spotify_url: url,
                        user_id: userId.toString()
                    })
                });
                
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }
                
                const result = await response.json();
                
                if (result.success === true) {
                    addOutput(`‚úÖ ${result.message}`);
                    
                    showResponse('success', result);
                    
                    const audioUrl = result.data.file_url;
                    addOutput(`üîó ${audioUrl}`);
                    
                    await setupAudioPlayer(audioUrl);
                    
                } else {
                    addOutput(`‚ùå Erro: ${result.message || 'Resposta inv√°lida'}`);
                    showResponse('error', result);
                }
                
            } catch (error) {
                addOutput(`‚ùå Erro na requisi√ß√£o: ${error.message}`);
                showResponse('error', { 
                    error: error.message,
                    message: 'Falha na conex√£o com a API'
                });
            }
        }

        async function handleYouTube(input) {
    let videoId = null;
    
    if (input.includes('youtube.com') || input.includes('youtu.be')) {
        videoId = extractYouTubeId(input);
        
        if (!videoId) {
            addOutput('‚ùå N√£o foi poss√≠vel extrair o ID do v√≠deo da URL');
            showResponse('error', {
                message: 'URL do YouTube inv√°lida',
                url: input
            });
            return;
        }
        
        addOutput(`üîó URL detectada: ${input}`);
        addOutput(`üé¨ ID extra√≠do: ${videoId}`);
    } else {
        
        videoId = input.split('?')[0].split('&')[0];
        
        if (videoId.length < 11 || videoId.length > 11) {
            addOutput('‚ùå ID do YouTube inv√°lido (deve ter 11 caracteres)');
            addOutput(`üìè Tamanho recebido: ${videoId.length} caracteres`);
            showResponse('error', {
                message: 'ID do YouTube inv√°lido',
                received_id: videoId
            });
            return;
        }
    }
    
    currentVideoId = videoId;
    
    addOutput(`üé¨ Processando YouTube...`);
    addOutput(`üìπ ID: ${videoId}`);
    
    const videoUrl = `https://yt.luangg.cloud/video/${videoId}?quality=1080p`;
    
    addOutput(`‚úÖ URL da API: ${videoUrl}`);
    
    showResponse('success', {
        video_id: videoId,
        url: videoUrl,
        quality: '1080p',
        original_input: input
    });
    
    setupVideoPlayer(videoUrl);
}

        function extractYouTubeId(url) {
    try {
        
        url = url.trim();
        
        const patterns = [
            /youtu\.be\/([a-zA-Z0-9_-]{11})/,
            /youtube\.com\/watch\?v=([a-zA-Z0-9_-]{11})/,
            /youtube\.com\/embed\/([a-zA-Z0-9_-]{11})/,
            /youtube\.com\/v\/([a-zA-Z0-9_-]{11})/,
            /youtube\.com\/shorts\/([a-zA-Z0-9_-]{11})/
        ];
        
        for (const pattern of patterns) {
            const match = url.match(pattern);
            if (match && match[1]) {
                return match[1];
            }
        }
        
        const urlObj = new URL(url);
        if (urlObj.hostname.includes('youtube.com')) {
            const vParam = urlObj.searchParams.get('v');
            if (vParam && vParam.length === 11) {
                return vParam;
            }
        }
        
        return null;
    } catch (error) {
        console.error('Erro ao extrair ID do YouTube:', error);
        return null;
    }
}

        async function setupAudioPlayer(audioUrl) {
            try {
                currentAudioUrl = audioUrl;
                
                audioPlayer.src = '';
                audioPlayer.load();
                
                audioPlayer.src = audioUrl;
                audioPlayer.load();
                
                document.getElementById('currentTime').textContent = '0:00';
                document.getElementById('duration').textContent = '0:00';
                document.getElementById('progressBar').style.width = '0%';
                document.getElementById('playIcon').className = 'fas fa-play';
                
                await new Promise((resolve, reject) => {
                    audioPlayer.oncanplay = resolve;
                    audioPlayer.onerror = reject;
                    setTimeout(resolve, 1000); // Timeout fallback
                });
                
                mediaPlayer.classList.add('active');
                
                addOutput(`üéµ Player carregado`);
                
            } catch (error) {
                addOutput(`‚ùå Erro ao carregar √°udio: ${error.message}`);
                showResponse('error', { 
                    message: 'Erro no player de √°udio',
                    error: error.message 
                });
            }
        }

        function setupVideoPlayer(videoUrl) {
            try {
                const videoContainer = document.getElementById('videoContainer');
                
                videoContainer.innerHTML = `
                    <video controls style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: #000;">
                        <source src="${videoUrl}" type="video/mp4">
                        Seu navegador n√£o suporta v√≠deo.
                    </video>
                `;
                
                youtubePlayer.classList.add('active');
                
                addOutput(`üì∫ V√≠deo carregado`);
                
            } catch (error) {
                addOutput(`‚ùå Erro ao carregar v√≠deo`);
            }
        }

        function playerControl(action) {
            const playIcon = document.getElementById('playIcon');
            
            switch(action) {
                case 'play':
                    if (audioPlayer.paused) {
                        audioPlayer.play().catch(e => {
                            addOutput(`‚ùå Erro ao reproduzir: ${e.message}`);
                        });
                        playIcon.className = 'fas fa-pause';
                    } else {
                        audioPlayer.pause();
                        playIcon.className = 'fas fa-play';
                    }
                    break;
                    
                case 'prev':
                    audioPlayer.currentTime = Math.max(0, audioPlayer.currentTime - 10);
                    break;
                    
                case 'next':
                    audioPlayer.currentTime = Math.min(audioPlayer.duration, audioPlayer.currentTime + 10);
                    break;
            }
        }

        function updateProgress() {
            const progressBar = document.getElementById('progressBar');
            const currentTime = document.getElementById('currentTime');
            
            if (audioPlayer.duration && !isNaN(audioPlayer.duration)) {
                const percentage = (audioPlayer.currentTime / audioPlayer.duration) * 100;
                progressBar.style.width = `${percentage}%`;
                currentTime.textContent = formatTime(audioPlayer.currentTime);
            }
        }

        function seekAudio(event) {
            if (!audioPlayer.duration || isNaN(audioPlayer.duration)) return;
            
            const progressBar = event.currentTarget;
            const rect = progressBar.getBoundingClientRect();
            const clickX = event.clientX - rect.left;
            const percentage = clickX / rect.width;
            
            audioPlayer.currentTime = percentage * audioPlayer.duration;
        }

        function downloadAudio() {
            if (currentAudioUrl) {
                const link = document.createElement('a');
                link.href = currentAudioUrl;
                link.download = `spotify_${Date.now()}.mp3`;
                link.click();
                addOutput('üì• Download iniciado');
            }
        }

        function openYouTubeVideo() {
            if (currentVideoId) {
                window.open(`https://youtube.com/watch?v=${currentVideoId}`, '_blank');
                addOutput('üåê Abrindo no YouTube...');
            }
        }

        function addOutput(text) {
            const output = document.createElement('div');
            output.className = 'terminal-text';
            output.textContent = text;
            terminalOutput.appendChild(output);
            terminalOutput.scrollTop = terminalOutput.scrollHeight;
        }

        function showResponse(type, data) {
            const response = document.createElement('div');
            response.className = `response ${type}`;
            
            const statusText = type === 'success' ? 'SUCESSO' : 'ERRO';
            const statusClass = `status-${type}`;
            
            const time = new Date().toLocaleTimeString('pt-BR', {
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit'
            });
            
            try {
                const formattedData = JSON.stringify(data, null, 2);
                response.innerHTML = `
                    <div class="response-header">
                        <span class="response-status ${statusClass}">${statusText}</span>
                        <span class="response-time">${time}</span>
                    </div>
                    <div class="response-body">${formattedData}</div>
                `;
            } catch (e) {
                response.innerHTML = `
                    <div class="response-header">
                        <span class="response-status ${statusClass}">${statusText}</span>
                        <span class="response-time">${time}</span>
                    </div>
                    <div class="response-body">${String(data)}</div>
                `;
            }
            
            responseArea.insertBefore(response, responseArea.firstChild);
            
            while (responseArea.children.length > 3) {
                responseArea.removeChild(responseArea.lastChild);
            }
        }

        function formatTime(seconds) {
            if (isNaN(seconds)) return '0:00';
            
            const mins = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return `${mins}:${secs.toString().padStart(2, '0')}`;
        }
    </script>
</body>
</html>
